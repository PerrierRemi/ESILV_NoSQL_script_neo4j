// Load companies.csv
load csv with headers from "file:/companies.csv" as l 
create(Companies:Companie{
name:l.name,
permalink:l.permalink,
crunchbase_url:l.crunchbase_url, 
homepage_url:l.homepage_url, 
blog_feed_url:l.blog_feed_url, 
twitter_username:l.twitter_username, 
number_of_employees:toInteger(l.number_of_employees), 
founded_year:toInteger(l.founded_year), 
founded_mont:toInteger(l.founded_month), 
founded_day:toInteger(l.founded_day), 
deadpooled_year:toInteger(l.deadpooled_year),
deadpooled_month:toInteger(l.deadpooled_month),
deadpooled_day:toInteger(l.deadpooled_day),
deadpooled_url:l.deadpooled_url,
email_adress:l.email_address,
phone_number:l.phone_numer,
description:l.description,
created_at:l.created_at,
updated_at:l.updated_at,
total_money_raised:l.total_money_raised});

// Load products.csv
load csv with headers from "file:/products.csv" as l
create(Products:Product{
name:l.name,
permalink:l.permalink});

// Load persons.csv
load csv with headers from "file:/persons.csv" as l
create(Persons:Person{
first_name:l.first_name,
last_name:l.last_name,
permalink:l.permalink});

// Create index
create index on :Companie(permalink);
create index on :Product(permalink);
create index on :Person(permalink);

// Load companies_products.csv
load csv with headers from "file:/companies_products.csv" as l
merge(companie:Companie{permalink:l.companie_permalink})
merge(product:Product{permalink:l.product_permalink})
create (product) -[:is_produced_by] -> (companie)

// Load companies_persons.csv
load csv with headers from "file:/companies_persons.csv" as l
merge(companie:Companie{permalink:l.companie_permalink})
merge(person:Person{permalink:l.person_permalink})
create (person) -[:is_in_relationship_with {is_past:l.is_past, title:l.title}] -> (companie)